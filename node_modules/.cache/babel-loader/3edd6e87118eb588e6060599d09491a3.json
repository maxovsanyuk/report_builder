{"ast":null,"code":"var _jsxFileName = \"/Users/admin/UDS/addons-reportbuilder/src/components/Workspace/views/DragableWgComponent.js\";\nimport Draggable from \"react-draggable\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { makeResizableDiv } from \"../helpers/makeResizibleDiv\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport { setWidgetsList } from \"../../../redux/actions/app_action\";\nimport styled from \"styled-components\";\nimport ImgMenu from \"../../WidgetsToolBar/images/menu-icon.png\";\nimport get from \"lodash/get\";\nconst WgMainBox = styled.div`\n  min-height: 100%;\n  min-width: 100%;\n\n  .wg-menu {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 40px;\n    height: 40px;\n    border-bottom-left-radius: 20%;\n    z-index: 20;\n    background: #ccc url(${ImgMenu}) no-repeat center;\n    background-size: 60%;\n    transition: 0.3s;\n\n    &:hover {\n      transition: 0.3s;\n      cursor: pointer;\n      background: #4da6ff url(${ImgMenu}) no-repeat center;\n      background-size: 60%;\n    }\n  }\n`;\nconst WgMenu = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-width: 200px;\n  min-height: 140px;\n  padding: 10px;\n  box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n  background: #fff;\n  position: absolute;\n  z-index: 100;\n  top: 20px;\n  right: -80px;\n\n  .input {\n    margin: 0 0 10px 0;\n  }\n`;\n\nconst WidgetMenu = ({\n  widget,\n  setIsWgMwnuOpen,\n  setCurrentWidgetState,\n  currentWidgetState\n}) => {\n  const state = useSelector(state => state.app);\n  const {\n    widgetsList\n  } = state;\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(WgMenu, {\n    onMouseDown: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false\n      });\n    },\n    className: \"wg-menu-bar\",\n    onMouseOver: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onMouseDown: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false\n      });\n    },\n    className: \"close-btn\",\n    onClick: () => {\n      setIsWgMwnuOpen(false);\n      setCurrentWidgetState({ ...currentWidgetState,\n        isMenuOpen: false\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"X\"), widget.name, \" \", get(widget, \"clone\") && \"(Clone)\", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"remove-btn\",\n    onClick: () => {\n      dispatch(setWidgetsList(widgetsList.filter(w => (w === null || w === void 0 ? void 0 : w.id) !== (widget === null || widget === void 0 ? void 0 : widget.id))));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, \"Remove \", widget.name), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"remove-btn\",\n    onClick: () => {\n      setIsWgMwnuOpen(false);\n      setCurrentWidgetState({ ...currentWidgetState,\n        isMenuOpen: false\n      });\n      dispatch(setWidgetsList([...widgetsList, {\n        id: new Date().getTime(),\n        name: widget.name,\n        top: 20,\n        left: 20,\n        clone: true,\n        draggable: false\n      }]));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, \"Clone\"));\n};\n\nconst WgBox = ({\n  widget,\n  currentWidgetState,\n  setCurrentWidgetState\n}) => {\n  var _widget$size, _widget$size$sizing, _widget$size2, _widget$size2$sizing;\n\n  const [isWgMenuOpen, setIsWgMwnuOpen] = useState(false);\n  let currentWidget = document.getElementById(`${widget === null || widget === void 0 ? void 0 : widget.id}`);\n  const state = useSelector(state => state.app);\n  const {\n    widgetsList\n  } = state;\n  const dispatch = useDispatch();\n  makeResizableDiv(`.${widget.name}_${widget.id}_resizable`);\n  return /*#__PURE__*/React.createElement(ReactResizeDetector, {\n    onResize: (w, h) => {\n      dispatch(setWidgetsList(widgetsList.map(w => {\n        return w.id === widget.id ? { ...w,\n          size: {\n            sizing: {\n              height: currentWidget ? currentWidget.offsetHeight : 600,\n              width: currentWidget ? currentWidget.offsetWidth : 600\n            }\n          }\n        } : w;\n      })));\n      setCurrentWidgetState({ ...currentWidgetState,\n        isActive: false,\n        name: null,\n        draggable: true,\n        id: null\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(WgMainBox, {\n    className: \"resizers\",\n    id: widget === null || widget === void 0 ? void 0 : widget.id,\n    style: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      background: `rgba(255,255,255,0.9) url(${require(`../../WidgetsToolBar/images/${widget.name}.png`)}) no-repeat center`\n    },\n    onMouseOver: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      setCurrentWidgetState({ ...currentWidgetState,\n        isActive: true,\n        name: widget.name,\n        draggable: false,\n        id: widget.id\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, (currentWidgetState === null || currentWidgetState === void 0 ? void 0 : currentWidgetState.isActive) && (currentWidgetState === null || currentWidgetState === void 0 ? void 0 : currentWidgetState.id) === widget.id && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wg-menu\",\n    onClick: e => {\n      e.stopPropagation();\n      setIsWgMwnuOpen(!isWgMenuOpen);\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false,\n        isMenuOpen: !isWgMenuOpen\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n      justifyContent: \"center\",\n      position: \"absolute\",\n      bottom: \"5px\",\n      fontSize: \"14px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      margin: \"0 10px 0 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, \"H:\", \" \", currentWidget ? currentWidget.offsetHeight : widget === null || widget === void 0 ? void 0 : (_widget$size = widget.size) === null || _widget$size === void 0 ? void 0 : (_widget$size$sizing = _widget$size.sizing) === null || _widget$size$sizing === void 0 ? void 0 : _widget$size$sizing.height, \"px\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, \"W:\", \" \", currentWidget ? currentWidget.offsetWidth : widget === null || widget === void 0 ? void 0 : (_widget$size2 = widget.size) === null || _widget$size2 === void 0 ? void 0 : (_widget$size2$sizing = _widget$size2.sizing) === null || _widget$size2$sizing === void 0 ? void 0 : _widget$size2$sizing.width, \"px\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }, \"X: \", get(currentWidgetState, \"position.clientX\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resizer top-right\",\n    onMouseMove: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false\n      });\n    },\n    onMouseOver: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resizer bottom-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resizer bottom-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  })), isWgMenuOpen && /*#__PURE__*/React.createElement(WidgetMenu, {\n    widget: widget,\n    setIsWgMwnuOpen: setIsWgMwnuOpen,\n    setCurrentWidgetState: setCurrentWidgetState,\n    currentWidgetState: currentWidgetState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }\n  }));\n};\n\nconst DragableWgComponent = ({\n  widget,\n  dragHandlers,\n  setCurrentWidgetState,\n  currentWidgetState\n}) => {\n  return /*#__PURE__*/React.createElement(Draggable, Object.assign({\n    onDrag: (e, d) => setCurrentWidgetState({ ...currentWidgetState,\n      position: e\n    }),\n    key: widget.id,\n    bounds: \"parent\"\n  }, dragHandlers, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    onMouseOver: () => {\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false,\n        isActive: true,\n        id: widget.id\n      });\n    },\n    className: `box resizable ${widget.name}_${widget.id}_resizable`,\n    style: {\n      position: \"absolute\",\n      left: `${widget === null || widget === void 0 ? void 0 : widget.left}px`,\n      top: `${widget === null || widget === void 0 ? void 0 : widget.top}px`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onMouseOver: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: true\n      });\n    },\n    className: \"resizible-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(WgBox, {\n    widget: widget,\n    setCurrentWidgetState: setCurrentWidgetState,\n    currentWidgetState: currentWidgetState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default DragableWgComponent;","map":{"version":3,"sources":["/Users/admin/UDS/addons-reportbuilder/src/components/Workspace/views/DragableWgComponent.js"],"names":["Draggable","React","useState","useDispatch","useSelector","makeResizableDiv","ReactResizeDetector","setWidgetsList","styled","ImgMenu","get","WgMainBox","div","WgMenu","WidgetMenu","widget","setIsWgMwnuOpen","setCurrentWidgetState","currentWidgetState","state","app","widgetsList","dispatch","e","stopPropagation","draggable","isMenuOpen","name","filter","w","id","Date","getTime","top","left","clone","WgBox","isWgMenuOpen","currentWidget","document","getElementById","h","map","size","sizing","height","offsetHeight","width","offsetWidth","isActive","position","background","require","preventDefault","display","flexDirection","justifyContent","bottom","fontSize","margin","DragableWgComponent","dragHandlers","d"],"mappings":"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","sourcesContent":["import Draggable from \"react-draggable\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { makeResizableDiv } from \"../helpers/makeResizibleDiv\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport { setWidgetsList } from \"../../../redux/actions/app_action\";\nimport styled from \"styled-components\";\nimport ImgMenu from \"../../WidgetsToolBar/images/menu-icon.png\";\nimport get from \"lodash/get\";\n\nconst WgMainBox = styled.div`\n  min-height: 100%;\n  min-width: 100%;\n\n  .wg-menu {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 40px;\n    height: 40px;\n    border-bottom-left-radius: 20%;\n    z-index: 20;\n    background: #ccc url(${ImgMenu}) no-repeat center;\n    background-size: 60%;\n    transition: 0.3s;\n\n    &:hover {\n      transition: 0.3s;\n      cursor: pointer;\n      background: #4da6ff url(${ImgMenu}) no-repeat center;\n      background-size: 60%;\n    }\n  }\n`;\n\nconst WgMenu = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-width: 200px;\n  min-height: 140px;\n  padding: 10px;\n  box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n  background: #fff;\n  position: absolute;\n  z-index: 100;\n  top: 20px;\n  right: -80px;\n\n  .input {\n    margin: 0 0 10px 0;\n  }\n`;\n\nconst WidgetMenu = ({\n  widget,\n  setIsWgMwnuOpen,\n  setCurrentWidgetState,\n  currentWidgetState,\n}) => {\n  const state = useSelector((state) => state.app);\n  const { widgetsList } = state;\n  const dispatch = useDispatch();\n\n  return (\n    <WgMenu\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setCurrentWidgetState({\n          ...currentWidgetState,\n          draggable: false,\n        });\n      }}\n      className=\"wg-menu-bar\"\n      onMouseOver={(e) => e.stopPropagation()}\n    >\n      <div\n        onMouseDown={(e) => {\n          e.stopPropagation();\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            draggable: false,\n          });\n        }}\n        className=\"close-btn\"\n        onClick={() => {\n          setIsWgMwnuOpen(false);\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            isMenuOpen: false,\n          });\n        }}\n      >\n        X\n      </div>\n      {widget.name} {get(widget, \"clone\") && \"(Clone)\"}\n      <button\n        className=\"remove-btn\"\n        onClick={() => {\n          dispatch(\n            setWidgetsList(widgetsList.filter((w) => w?.id !== widget?.id))\n          );\n        }}\n      >\n        Remove {widget.name}\n      </button>\n      <button\n        className=\"remove-btn\"\n        onClick={() => {\n          setIsWgMwnuOpen(false);\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            isMenuOpen: false,\n          });\n\n          dispatch(\n            setWidgetsList([\n              ...widgetsList,\n              {\n                id: new Date().getTime(),\n                name: widget.name,\n                top: 20,\n                left: 20,\n                clone: true,\n                draggable: false,\n              },\n            ])\n          );\n        }}\n      >\n        Clone\n      </button>\n    </WgMenu>\n  );\n};\n\nconst WgBox = ({ widget, currentWidgetState, setCurrentWidgetState }) => {\n  const [isWgMenuOpen, setIsWgMwnuOpen] = useState(false);\n\n  let currentWidget = document.getElementById(`${widget?.id}`);\n\n  const state = useSelector((state) => state.app);\n  const { widgetsList } = state;\n  const dispatch = useDispatch();\n\n  makeResizableDiv(`.${widget.name}_${widget.id}_resizable`);\n\n  return (\n    <ReactResizeDetector\n      onResize={(w, h) => {\n        dispatch(\n          setWidgetsList(\n            widgetsList.map((w) => {\n              return w.id === widget.id\n                ? {\n                    ...w,\n                    size: {\n                      sizing: {\n                        height: currentWidget\n                          ? currentWidget.offsetHeight\n                          : 600,\n                        width: currentWidget ? currentWidget.offsetWidth : 600,\n                      },\n                    },\n                  }\n                : w;\n            })\n          )\n        );\n\n        setCurrentWidgetState({\n          ...currentWidgetState,\n          isActive: false,\n          name: null,\n          draggable: true,\n          id: null,\n        });\n      }}\n    >\n      <WgMainBox\n        className=\"resizers\"\n        id={widget?.id}\n        style={{\n          position: \"absolute\",\n          width: \"100%\",\n          height: \"100%\",\n          background: `rgba(255,255,255,0.9) url(${require(`../../WidgetsToolBar/images/${widget.name}.png`)}) no-repeat center`,\n        }}\n        onMouseOver={(e) => {\n          e.stopPropagation();\n          e.preventDefault();\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            isActive: true,\n            name: widget.name,\n            draggable: false,\n            id: widget.id,\n          });\n        }}\n      >\n        {currentWidgetState?.isActive && currentWidgetState?.id === widget.id && (\n          <div\n            className=\"wg-menu\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsWgMwnuOpen(!isWgMenuOpen);\n\n              setCurrentWidgetState({\n                ...currentWidgetState,\n                draggable: false,\n                isMenuOpen: !isWgMenuOpen,\n              });\n            }}\n          />\n        )}\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            width: \"100%\",\n            justifyContent: \"center\",\n            position: \"absolute\",\n            bottom: \"5px\",\n            fontSize: \"14px\",\n          }}\n        >\n          <div>\n            <span style={{ margin: \"0 10px 0 0\" }}>\n              H:{\" \"}\n              {currentWidget\n                ? currentWidget.offsetHeight\n                : widget?.size?.sizing?.height}\n              px\n            </span>\n            <span>\n              W:{\" \"}\n              {currentWidget\n                ? currentWidget.offsetWidth\n                : widget?.size?.sizing?.width}\n              px\n            </span>\n          </div>\n          <div>X: {get(currentWidgetState, \"position.clientX\")}</div>\n        </div>\n\n        <div\n          className=\"resizer top-right\"\n          onMouseMove={(e) => {\n            e.stopPropagation();\n            setCurrentWidgetState({\n              ...currentWidgetState,\n              draggable: false,\n            });\n          }}\n          onMouseOver={(e) => e.stopPropagation()}\n        />\n        <div className=\"resizer bottom-left\" />\n        <div className=\"resizer bottom-right\" />\n      </WgMainBox>\n      {isWgMenuOpen && (\n        <WidgetMenu\n          widget={widget}\n          setIsWgMwnuOpen={setIsWgMwnuOpen}\n          setCurrentWidgetState={setCurrentWidgetState}\n          currentWidgetState={currentWidgetState}\n        />\n      )}\n    </ReactResizeDetector>\n  );\n};\n\nconst DragableWgComponent = ({\n  widget,\n  dragHandlers,\n  setCurrentWidgetState,\n  currentWidgetState,\n}) => {\n  return (\n    <Draggable\n      onDrag={(e, d) =>\n        setCurrentWidgetState({\n          ...currentWidgetState,\n          position: e,\n        })\n      }\n      key={widget.id}\n      bounds=\"parent\"\n      {...dragHandlers}\n    >\n      <div\n        onMouseOver={() => {\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            draggable: false,\n            isActive: true,\n            id: widget.id,\n          });\n        }}\n        className={`box resizable ${widget.name}_${widget.id}_resizable`}\n        style={{\n          position: \"absolute\",\n          left: `${widget?.left}px`,\n          top: `${widget?.top}px`,\n        }}\n      >\n        <div\n          onMouseOver={(e) => {\n            e.stopPropagation();\n            setCurrentWidgetState({\n              ...currentWidgetState,\n              draggable: true,\n            });\n          }}\n          className=\"resizible-btn\"\n        />\n\n        <WgBox\n          widget={widget}\n          setCurrentWidgetState={setCurrentWidgetState}\n          currentWidgetState={currentWidgetState}\n        />\n      </div>\n    </Draggable>\n  );\n};\n\nexport default DragableWgComponent;\n"]},"metadata":{},"sourceType":"module"}