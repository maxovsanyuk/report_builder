{"ast":null,"code":"var _jsxFileName = \"/Users/admin/UDS/addons-reportbuilder/src/components/Workspace/Dustbin.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setSettings, setWidgetsList } from \"../../redux/actions/app_action\";\nimport ImgMenu from \"../../components/WidgetsToolBar/images/menu-icon.png\";\nimport ResizibleImg from \"../../components/WidgetsToolBar/images/resizible.png\";\nimport styled from \"styled-components\";\nimport Grid from \"../../images/grid.png\"; // DND\n\nimport { useDrop } from \"react-dnd\";\nimport Draggable from \"react-draggable\";\nimport ReactResizeDetector from \"react-resize-detector\"; // LODASH\n\nimport get from \"lodash/get\";\nimport { makeResizableDiv } from \"./helpers/makeResizibleDiv\";\nconst DnDBox = styled.div`\n  width: calc(100% - 60px);\n  margin: 0 60px 0 0;\n  height: calc(100vh - 60px);\n  display: flex;\n  flex-flow: nowrap column;\n  overflow: auto;\n\n  .react-draggable,\n  .cursor {\n    cursor: move;\n  }\n  .no-cursor {\n    cursor: auto;\n  }\n  .cursor-y {\n    cursor: ns-resize;\n  }\n  .cursor-x {\n    cursor: ew-resize;\n  }\n\n  .box {\n    min-height: 200px;\n    min-width: 200px;\n    float: left;\n    z-index: 999;\n\n    &:hover {\n      cursor: default;\n    }\n\n    //&::-webkit-resizer {\n    //}\n  }\n\n  .sidebar {\n    border-radius: 2px;\n    position: relative;\n    z-index: 1000;\n    resize: both;\n    overflow: auto;\n    box-sizing: border-box;\n  }\n\n  .wg-info {\n    text-align: center;\n    padding: 10px;\n    background: #fff;\n  }\n\n  .close-btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    position: absolute;\n    top: -15px;\n    right: -15px;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    border: 1px solid #ccc;\n    background: #fff;\n    transition: 0.3s;\n    &:hover {\n      cursor: pointer;\n      transition: 0.3s;\n      background: #4da6ff;\n    }\n    &:focus {\n      outline: none;\n    }\n  }\n  .remove-btn {\n    margin: 5px 0 0 0;\n    padding: 5px;\n    border: none;\n    box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n    background: #fff;\n    transition: 0.3s;\n    &:hover {\n      transition: 0.3s;\n      cursor: pointer;\n      color: crimson;\n    }\n    &:focus {\n      outline: none;\n    }\n  }\n\n  .resizible-btn {\n    position: absolute;\n    height: 50px;\n    width: 50px;\n    background: #fff url(${ResizibleImg}) no-repeat center;\n    background-size: 50%;\n    border-radius: 50%;\n    left: -10px;\n    top: -10px;\n    z-index: 100;\n    box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n    transition: 0.3s;\n    &:hover {\n      transition: 0.3s;\n      cursor: move;\n      background: #4da6ff url(${ResizibleImg}) no-repeat center;\n      background-size: 50%;\n      transform: rotate(360deg);\n    }\n  }\n\n  body,\n  html {\n    background: black;\n  }\n  .resizable {\n    width: 100px;\n    height: 100px;\n    position: absolute;\n    top: 100px;\n    left: 100px;\n  }\n\n  .resizable .resizers {\n    width: 100%;\n    height: 100%;\n    border: 3px dashed #4286f4;\n    box-sizing: border-box;\n  }\n\n  .resizable .resizers .resizer {\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: white;\n    border: 3px solid #4286f4;\n    position: absolute;\n    z-index: 1000;\n  }\n\n  .resizable .resizers .resizer.top-right {\n    right: -5px;\n    top: -5px;\n    cursor: nesw-resize;\n  }\n  .resizable .resizers .resizer.bottom-left {\n    left: -5px;\n    bottom: -5px;\n    cursor: nesw-resize;\n  }\n  .resizable .resizers .resizer.bottom-right {\n    right: -5px;\n    bottom: -5px;\n    cursor: nwse-resize;\n  }\n`;\nconst WgMainBox = styled.div`\n  min-height: 100%;\n  min-width: 100%;\n\n  .wg-menu {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 40px;\n    height: 40px;\n    border-bottom-left-radius: 20%;\n    z-index: 20;\n    background: #ccc url(${ImgMenu}) no-repeat center;\n    background-size: 60%;\n    transition: 0.3s;\n\n    &:hover {\n      transition: 0.3s;\n      cursor: pointer;\n      background: #4da6ff url(${ImgMenu}) no-repeat center;\n      background-size: 60%;\n    }\n  }\n`;\nconst WgMenu = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-width: 200px;\n  min-height: 140px;\n  padding: 10px;\n  box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n  background: #fff;\n  position: absolute;\n  z-index: 100;\n  top: 20px;\n  right: -80px;\n\n  .input {\n    margin: 0 0 10px 0;\n  }\n`;\n\nconst WidgetMenu = ({\n  widget,\n  setIsWgMwnuOpen,\n  setCurrentWidgetState,\n  currentWidgetState\n}) => {\n  const state = useSelector(state => state.app);\n  const {\n    widgetsList\n  } = state;\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(WgMenu, {\n    onMouseDown: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false\n      });\n    },\n    className: \"wg-menu-bar\",\n    onMouseOver: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onMouseDown: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false\n      });\n    },\n    className: \"close-btn\",\n    onClick: () => {\n      setIsWgMwnuOpen(false);\n      setCurrentWidgetState({ ...currentWidgetState,\n        isMenuOpen: false\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }, \"X\"), widget.name, \" \", get(widget, \"clone\") && \"(Clone)\", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"remove-btn\",\n    onClick: () => {\n      dispatch(setWidgetsList(widgetsList.filter(w => (w === null || w === void 0 ? void 0 : w.id) !== (widget === null || widget === void 0 ? void 0 : widget.id))));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }\n  }, \"Remove \", widget.name), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"remove-btn\",\n    onClick: () => {\n      setIsWgMwnuOpen(false);\n      setCurrentWidgetState({ ...currentWidgetState,\n        isMenuOpen: false\n      });\n      dispatch(setWidgetsList([...widgetsList, {\n        id: new Date().getTime(),\n        name: widget.name,\n        top: 20,\n        left: 20,\n        clone: true,\n        draggable: false\n      }]));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }\n  }, \"Clone\"));\n};\n\nconst WgBox = ({\n  widget,\n  currentWidgetState,\n  setCurrentWidgetState\n}) => {\n  var _widget$size, _widget$size$sizing, _widget$size2, _widget$size2$sizing;\n\n  const [isWgMenuOpen, setIsWgMwnuOpen] = useState(false);\n  let currentWidget = document.getElementById(`${widget === null || widget === void 0 ? void 0 : widget.id}`);\n  const state = useSelector(state => state.app);\n  const {\n    widgetsList\n  } = state;\n  const dispatch = useDispatch();\n  makeResizableDiv(`.${widget.name}_${widget.id}_resizable`);\n  return /*#__PURE__*/React.createElement(ReactResizeDetector, {\n    onResize: (w, h) => {\n      dispatch(setWidgetsList(widgetsList.map(w => {\n        return w.id === widget.id ? { ...w,\n          size: {\n            sizing: {\n              height: currentWidget ? currentWidget.offsetHeight : 600,\n              width: currentWidget ? currentWidget.offsetWidth : 600\n            }\n          }\n        } : w;\n      })));\n      setCurrentWidgetState({ ...currentWidgetState,\n        isActive: false,\n        name: null,\n        draggable: true,\n        id: null\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(WgMainBox, {\n    className: \"resizers\",\n    id: widget === null || widget === void 0 ? void 0 : widget.id,\n    style: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      background: `rgba(255,255,255,0.9) url(${require(`../WidgetsToolBar/images/${widget.name}.png`)}) no-repeat center`\n    },\n    onMouseOver: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      setCurrentWidgetState({ ...currentWidgetState,\n        isActive: true,\n        name: widget.name,\n        draggable: false,\n        id: widget.id\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }\n  }, (currentWidgetState === null || currentWidgetState === void 0 ? void 0 : currentWidgetState.isActive) && (currentWidgetState === null || currentWidgetState === void 0 ? void 0 : currentWidgetState.id) === widget.id && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wg-menu\",\n    onClick: e => {\n      e.stopPropagation();\n      setIsWgMwnuOpen(!isWgMenuOpen);\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false,\n        isMenuOpen: !isWgMenuOpen\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      width: \"100%\",\n      justifyContent: \"center\",\n      position: \"absolute\",\n      bottom: \"5px\",\n      fontSize: \"14px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      margin: \"0 10px 0 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 11\n    }\n  }, \"H:\", \" \", currentWidget ? currentWidget.offsetHeight : widget === null || widget === void 0 ? void 0 : (_widget$size = widget.size) === null || _widget$size === void 0 ? void 0 : (_widget$size$sizing = _widget$size.sizing) === null || _widget$size$sizing === void 0 ? void 0 : _widget$size$sizing.height, \"px\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 11\n    }\n  }, \"W:\", \" \", currentWidget ? currentWidget.offsetWidth : widget === null || widget === void 0 ? void 0 : (_widget$size2 = widget.size) === null || _widget$size2 === void 0 ? void 0 : (_widget$size2$sizing = _widget$size2.sizing) === null || _widget$size2$sizing === void 0 ? void 0 : _widget$size2$sizing.width, \"px\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resizer top-right\",\n    onMouseMove: e => {\n      e.stopPropagation();\n      setCurrentWidgetState({ ...currentWidgetState,\n        draggable: false\n      });\n    },\n    onMouseOver: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resizer bottom-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resizer bottom-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 9\n    }\n  })), isWgMenuOpen && /*#__PURE__*/React.createElement(WidgetMenu, {\n    widget: widget,\n    setIsWgMwnuOpen: setIsWgMwnuOpen,\n    setCurrentWidgetState: setCurrentWidgetState,\n    currentWidgetState: currentWidgetState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport const Dustbin = () => {\n  var _reportSettings$basic, _reportSettings$basic2, _reportSettings$basic3, _reportSettings$basic4, _reportSettings$basic5, _reportSettings$basic6;\n\n  const [currentWidgetState, setCurrentWidgetState] = useState({\n    isActive: false,\n    name: null,\n    draggable: true,\n    isMenuOpen: false\n  });\n  const state = useSelector(state => state.app);\n  const {\n    widgetsList,\n    settings\n  } = state;\n  const {\n    reportSettings\n  } = settings;\n  console.log(reportSettings, \"reportSettings\");\n  const dispatch = useDispatch();\n  const [{\n    canDrop,\n    isOver\n  }, drop] = useDrop({\n    accept: \"box\",\n\n    drop(item, monitor) {\n      return {\n        name: \"Dustbin\"\n      };\n    },\n\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n  const isActive = canDrop && isOver;\n  let background = `url(${Grid})`;\n\n  if (isActive) {\n    background = `lightskyblue url(${Grid})`;\n  } else if (canDrop) {\n    background = `lightgreen url(${Grid})`;\n  }\n\n  const [activeDrags, setActiveDrags] = useState(0);\n\n  function onStart() {\n    return currentWidgetState === null || currentWidgetState === void 0 ? void 0 : currentWidgetState.draggable;\n  }\n\n  function onStop() {\n    setActiveDrags(activeDrags);\n  }\n\n  const dragHandlers = {\n    onStart,\n    onStop\n  };\n  return /*#__PURE__*/React.createElement(DnDBox, {\n    reportSettings: reportSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"relative\",\n      width: \"fit-content\",\n      margin: \"10px\",\n      background: `rgba(${reportSettings === null || reportSettings === void 0 ? void 0 : (_reportSettings$basic = reportSettings.basic) === null || _reportSettings$basic === void 0 ? void 0 : (_reportSettings$basic2 = _reportSettings$basic.backgroundColor) === null || _reportSettings$basic2 === void 0 ? void 0 : _reportSettings$basic2.rgb.r}, ${reportSettings === null || reportSettings === void 0 ? void 0 : (_reportSettings$basic3 = reportSettings.basic) === null || _reportSettings$basic3 === void 0 ? void 0 : (_reportSettings$basic4 = _reportSettings$basic3.backgroundColor) === null || _reportSettings$basic4 === void 0 ? void 0 : _reportSettings$basic4.rgb.g},${reportSettings === null || reportSettings === void 0 ? void 0 : (_reportSettings$basic5 = reportSettings.basic) === null || _reportSettings$basic5 === void 0 ? void 0 : (_reportSettings$basic6 = _reportSettings$basic5.backgroundColor) === null || _reportSettings$basic6 === void 0 ? void 0 : _reportSettings$basic6.rgb.b}, 0.6)`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ReactResizeDetector, {\n    handleWidth: true,\n    handleHeight: true,\n    onResize: (width, height) => console.log(\"WI\", width),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 9\n    }\n  }, ({\n    width,\n    height\n  }) => {\n    var _reportSettings$basic7, _reportSettings$basic8, _reportSettings$basic9;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar\",\n      ref: drop,\n      style: {\n        background,\n        position: \"relative\",\n        overflow: \"auto\",\n        textAlign: \"center\",\n        width: `${reportSettings.position.width}px`,\n        height: `${reportSettings.position.height}px`,\n        minHeight: `${reportSettings.position.minHeight}px`,\n        minWidth: `${reportSettings.position.minWidth}px`,\n        border: `2px ${(reportSettings === null || reportSettings === void 0 ? void 0 : (_reportSettings$basic7 = reportSettings.basic) === null || _reportSettings$basic7 === void 0 ? void 0 : _reportSettings$basic7.border) || \"solid\"} ${(reportSettings === null || reportSettings === void 0 ? void 0 : (_reportSettings$basic8 = reportSettings.basic) === null || _reportSettings$basic8 === void 0 ? void 0 : (_reportSettings$basic9 = _reportSettings$basic8.color) === null || _reportSettings$basic9 === void 0 ? void 0 : _reportSettings$basic9.hex) || \"#ccc\"}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: \"5px 0 0 0\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 17\n      }\n    }, \"W:\", \" \", get(settings, \"reportSettings.position.width\", get(reportSettings, \"basic.border\") === \"None\" ? width : width + 4), \" \", \"x H:\", \" \", get(settings, \"reportSettings.position.height\", get(reportSettings, \"basic.border\") === \"None\" ? height : height + 4)), widgetsList.map(w => {\n      return /*#__PURE__*/React.createElement(Draggable, Object.assign({\n        key: w.id,\n        bounds: \"parent\"\n      }, dragHandlers, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        onMouseOver: () => {\n          setCurrentWidgetState({ ...currentWidgetState,\n            draggable: false,\n            isActive: true,\n            id: w.id\n          });\n        },\n        className: `box resizable ${w.name}_${w.id}_resizable`,\n        style: {\n          position: \"absolute\",\n          left: `${w === null || w === void 0 ? void 0 : w.left}px`,\n          top: `${w === null || w === void 0 ? void 0 : w.top}px`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        onMouseOver: e => {\n          e.stopPropagation();\n          setCurrentWidgetState({ ...currentWidgetState,\n            draggable: true\n          });\n        },\n        className: \"resizible-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(WgBox, {\n        widget: w,\n        setCurrentWidgetState: setCurrentWidgetState,\n        currentWidgetState: currentWidgetState,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 25\n        }\n      })));\n    }));\n  })));\n};","map":{"version":3,"sources":["/Users/admin/UDS/addons-reportbuilder/src/components/Workspace/Dustbin.js"],"names":["React","useEffect","useState","useDispatch","useSelector","setSettings","setWidgetsList","ImgMenu","ResizibleImg","styled","Grid","useDrop","Draggable","ReactResizeDetector","get","makeResizableDiv","DnDBox","div","WgMainBox","WgMenu","WidgetMenu","widget","setIsWgMwnuOpen","setCurrentWidgetState","currentWidgetState","state","app","widgetsList","dispatch","e","stopPropagation","draggable","isMenuOpen","name","filter","w","id","Date","getTime","top","left","clone","WgBox","isWgMenuOpen","currentWidget","document","getElementById","h","map","size","sizing","height","offsetHeight","width","offsetWidth","isActive","position","background","require","preventDefault","display","justifyContent","bottom","fontSize","margin","Dustbin","settings","reportSettings","console","log","canDrop","isOver","drop","accept","item","monitor","collect","activeDrags","setActiveDrags","onStart","onStop","dragHandlers","basic","backgroundColor","rgb","r","g","b","overflow","textAlign","minHeight","minWidth","border","color","hex"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setSettings, setWidgetsList } from \"../../redux/actions/app_action\";\n\nimport ImgMenu from \"../../components/WidgetsToolBar/images/menu-icon.png\";\nimport ResizibleImg from \"../../components/WidgetsToolBar/images/resizible.png\";\n\nimport styled from \"styled-components\";\n\nimport Grid from \"../../images/grid.png\";\n\n// DND\n\nimport { useDrop } from \"react-dnd\";\nimport Draggable from \"react-draggable\";\nimport ReactResizeDetector from \"react-resize-detector\";\n\n// LODASH\n\nimport get from \"lodash/get\";\nimport { makeResizableDiv } from \"./helpers/makeResizibleDiv\";\n\nconst DnDBox = styled.div`\n  width: calc(100% - 60px);\n  margin: 0 60px 0 0;\n  height: calc(100vh - 60px);\n  display: flex;\n  flex-flow: nowrap column;\n  overflow: auto;\n\n  .react-draggable,\n  .cursor {\n    cursor: move;\n  }\n  .no-cursor {\n    cursor: auto;\n  }\n  .cursor-y {\n    cursor: ns-resize;\n  }\n  .cursor-x {\n    cursor: ew-resize;\n  }\n\n  .box {\n    min-height: 200px;\n    min-width: 200px;\n    float: left;\n    z-index: 999;\n\n    &:hover {\n      cursor: default;\n    }\n\n    //&::-webkit-resizer {\n    //}\n  }\n\n  .sidebar {\n    border-radius: 2px;\n    position: relative;\n    z-index: 1000;\n    resize: both;\n    overflow: auto;\n    box-sizing: border-box;\n  }\n\n  .wg-info {\n    text-align: center;\n    padding: 10px;\n    background: #fff;\n  }\n\n  .close-btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    position: absolute;\n    top: -15px;\n    right: -15px;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    border: 1px solid #ccc;\n    background: #fff;\n    transition: 0.3s;\n    &:hover {\n      cursor: pointer;\n      transition: 0.3s;\n      background: #4da6ff;\n    }\n    &:focus {\n      outline: none;\n    }\n  }\n  .remove-btn {\n    margin: 5px 0 0 0;\n    padding: 5px;\n    border: none;\n    box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n    background: #fff;\n    transition: 0.3s;\n    &:hover {\n      transition: 0.3s;\n      cursor: pointer;\n      color: crimson;\n    }\n    &:focus {\n      outline: none;\n    }\n  }\n\n  .resizible-btn {\n    position: absolute;\n    height: 50px;\n    width: 50px;\n    background: #fff url(${ResizibleImg}) no-repeat center;\n    background-size: 50%;\n    border-radius: 50%;\n    left: -10px;\n    top: -10px;\n    z-index: 100;\n    box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n    transition: 0.3s;\n    &:hover {\n      transition: 0.3s;\n      cursor: move;\n      background: #4da6ff url(${ResizibleImg}) no-repeat center;\n      background-size: 50%;\n      transform: rotate(360deg);\n    }\n  }\n\n  body,\n  html {\n    background: black;\n  }\n  .resizable {\n    width: 100px;\n    height: 100px;\n    position: absolute;\n    top: 100px;\n    left: 100px;\n  }\n\n  .resizable .resizers {\n    width: 100%;\n    height: 100%;\n    border: 3px dashed #4286f4;\n    box-sizing: border-box;\n  }\n\n  .resizable .resizers .resizer {\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: white;\n    border: 3px solid #4286f4;\n    position: absolute;\n    z-index: 1000;\n  }\n\n  .resizable .resizers .resizer.top-right {\n    right: -5px;\n    top: -5px;\n    cursor: nesw-resize;\n  }\n  .resizable .resizers .resizer.bottom-left {\n    left: -5px;\n    bottom: -5px;\n    cursor: nesw-resize;\n  }\n  .resizable .resizers .resizer.bottom-right {\n    right: -5px;\n    bottom: -5px;\n    cursor: nwse-resize;\n  }\n`;\n\nconst WgMainBox = styled.div`\n  min-height: 100%;\n  min-width: 100%;\n\n  .wg-menu {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 40px;\n    height: 40px;\n    border-bottom-left-radius: 20%;\n    z-index: 20;\n    background: #ccc url(${ImgMenu}) no-repeat center;\n    background-size: 60%;\n    transition: 0.3s;\n\n    &:hover {\n      transition: 0.3s;\n      cursor: pointer;\n      background: #4da6ff url(${ImgMenu}) no-repeat center;\n      background-size: 60%;\n    }\n  }\n`;\n\nconst WgMenu = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-width: 200px;\n  min-height: 140px;\n  padding: 10px;\n  box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.8);\n  background: #fff;\n  position: absolute;\n  z-index: 100;\n  top: 20px;\n  right: -80px;\n\n  .input {\n    margin: 0 0 10px 0;\n  }\n`;\n\nconst WidgetMenu = ({\n  widget,\n  setIsWgMwnuOpen,\n  setCurrentWidgetState,\n  currentWidgetState,\n}) => {\n  const state = useSelector((state) => state.app);\n  const { widgetsList } = state;\n  const dispatch = useDispatch();\n\n  return (\n    <WgMenu\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setCurrentWidgetState({\n          ...currentWidgetState,\n          draggable: false,\n        });\n      }}\n      className=\"wg-menu-bar\"\n      onMouseOver={(e) => e.stopPropagation()}\n    >\n      <div\n        onMouseDown={(e) => {\n          e.stopPropagation();\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            draggable: false,\n          });\n        }}\n        className=\"close-btn\"\n        onClick={() => {\n          setIsWgMwnuOpen(false);\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            isMenuOpen: false,\n          });\n        }}\n      >\n        X\n      </div>\n      {widget.name} {get(widget, \"clone\") && \"(Clone)\"}\n      <button\n        className=\"remove-btn\"\n        onClick={() => {\n          dispatch(\n            setWidgetsList(widgetsList.filter((w) => w?.id !== widget?.id))\n          );\n        }}\n      >\n        Remove {widget.name}\n      </button>\n      <button\n        className=\"remove-btn\"\n        onClick={() => {\n          setIsWgMwnuOpen(false);\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            isMenuOpen: false,\n          });\n\n          dispatch(\n            setWidgetsList([\n              ...widgetsList,\n              {\n                id: new Date().getTime(),\n                name: widget.name,\n                top: 20,\n                left: 20,\n                clone: true,\n                draggable: false,\n              },\n            ])\n          );\n        }}\n      >\n        Clone\n      </button>\n    </WgMenu>\n  );\n};\n\nconst WgBox = ({ widget, currentWidgetState, setCurrentWidgetState }) => {\n  const [isWgMenuOpen, setIsWgMwnuOpen] = useState(false);\n\n  let currentWidget = document.getElementById(`${widget?.id}`);\n\n  const state = useSelector((state) => state.app);\n  const { widgetsList } = state;\n  const dispatch = useDispatch();\n\n  makeResizableDiv(`.${widget.name}_${widget.id}_resizable`);\n\n  return (\n    <ReactResizeDetector\n      onResize={(w, h) => {\n        dispatch(\n          setWidgetsList(\n            widgetsList.map((w) => {\n              return w.id === widget.id\n                ? {\n                    ...w,\n                    size: {\n                      sizing: {\n                        height: currentWidget\n                          ? currentWidget.offsetHeight\n                          : 600,\n                        width: currentWidget ? currentWidget.offsetWidth : 600,\n                      },\n                    },\n                  }\n                : w;\n            })\n          )\n        );\n        setCurrentWidgetState({\n          ...currentWidgetState,\n          isActive: false,\n          name: null,\n          draggable: true,\n          id: null,\n        });\n      }}\n    >\n      <WgMainBox\n        className=\"resizers\"\n        id={widget?.id}\n        style={{\n          position: \"absolute\",\n          width: \"100%\",\n          height: \"100%\",\n          background: `rgba(255,255,255,0.9) url(${require(`../WidgetsToolBar/images/${widget.name}.png`)}) no-repeat center`,\n        }}\n        onMouseOver={(e) => {\n          e.stopPropagation();\n          e.preventDefault();\n          setCurrentWidgetState({\n            ...currentWidgetState,\n            isActive: true,\n            name: widget.name,\n            draggable: false,\n            id: widget.id,\n          });\n        }}\n      >\n        {currentWidgetState?.isActive && currentWidgetState?.id === widget.id && (\n          <div\n            className=\"wg-menu\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsWgMwnuOpen(!isWgMenuOpen);\n\n              setCurrentWidgetState({\n                ...currentWidgetState,\n                draggable: false,\n                isMenuOpen: !isWgMenuOpen,\n              });\n            }}\n          />\n        )}\n        <div\n          style={{\n            display: \"flex\",\n            width: \"100%\",\n            justifyContent: \"center\",\n            position: \"absolute\",\n            bottom: \"5px\",\n            fontSize: \"14px\",\n          }}\n        >\n          <span style={{ margin: \"0 10px 0 0\" }}>\n            H:{\" \"}\n            {currentWidget\n              ? currentWidget.offsetHeight\n              : widget?.size?.sizing?.height}\n            px\n          </span>\n          <span>\n            W:{\" \"}\n            {currentWidget\n              ? currentWidget.offsetWidth\n              : widget?.size?.sizing?.width}\n            px\n          </span>\n        </div>\n        <div\n          className=\"resizer top-right\"\n          onMouseMove={(e) => {\n            e.stopPropagation();\n            setCurrentWidgetState({\n              ...currentWidgetState,\n              draggable: false,\n            });\n          }}\n          onMouseOver={(e) => e.stopPropagation()}\n        />\n        <div className=\"resizer bottom-left\" />\n        <div className=\"resizer bottom-right\" />\n      </WgMainBox>\n      {isWgMenuOpen && (\n        <WidgetMenu\n          widget={widget}\n          setIsWgMwnuOpen={setIsWgMwnuOpen}\n          setCurrentWidgetState={setCurrentWidgetState}\n          currentWidgetState={currentWidgetState}\n        />\n      )}\n    </ReactResizeDetector>\n  );\n};\n\nexport const Dustbin = () => {\n  const [currentWidgetState, setCurrentWidgetState] = useState({\n    isActive: false,\n    name: null,\n    draggable: true,\n    isMenuOpen: false,\n  });\n\n  const state = useSelector((state) => state.app);\n  const { widgetsList, settings } = state;\n  const { reportSettings } = settings;\n\n  console.log(reportSettings, \"reportSettings\");\n\n  const dispatch = useDispatch();\n\n  const [{ canDrop, isOver }, drop] = useDrop({\n    accept: \"box\",\n    drop(item, monitor) {\n      return { name: \"Dustbin\" };\n    },\n\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  const isActive = canDrop && isOver;\n  let background = `url(${Grid})`;\n  if (isActive) {\n    background = `lightskyblue url(${Grid})`;\n  } else if (canDrop) {\n    background = `lightgreen url(${Grid})`;\n  }\n\n  const [activeDrags, setActiveDrags] = useState(0);\n\n  function onStart() {\n    return currentWidgetState?.draggable;\n  }\n\n  function onStop() {\n    setActiveDrags(activeDrags);\n  }\n\n  const dragHandlers = { onStart, onStop };\n\n  return (\n    <DnDBox reportSettings={reportSettings}>\n      <div\n        style={{\n          position: \"relative\",\n          width: \"fit-content\",\n          margin: \"10px\",\n          background: `rgba(${reportSettings?.basic?.backgroundColor?.rgb.r}, ${reportSettings?.basic?.backgroundColor?.rgb.g},${reportSettings?.basic?.backgroundColor?.rgb.b}, 0.6)`,\n        }}\n      >\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={(width, height) => console.log(\"WI\", width)}\n        >\n          {({ width, height }) => {\n            return (\n              <div\n                className=\"sidebar\"\n                ref={drop}\n                style={{\n                  background,\n                  position: \"relative\",\n                  overflow: \"auto\",\n                  textAlign: \"center\",\n                  width: `${reportSettings.position.width}px`,\n                  height: `${reportSettings.position.height}px`,\n                  minHeight: `${reportSettings.position.minHeight}px`,\n                  minWidth: `${reportSettings.position.minWidth}px`,\n                  border: `2px ${reportSettings?.basic?.border || \"solid\"} ${\n                    reportSettings?.basic?.color?.hex || \"#ccc\"\n                  }`,\n                }}\n              >\n                <div style={{ margin: \"5px 0 0 0\" }}>\n                  W:{\" \"}\n                  {get(\n                    settings,\n                    \"reportSettings.position.width\",\n                    get(reportSettings, \"basic.border\") === \"None\"\n                      ? width\n                      : width + 4\n                  )}{\" \"}\n                  x H:{\" \"}\n                  {get(\n                    settings,\n                    \"reportSettings.position.height\",\n                    get(reportSettings, \"basic.border\") === \"None\"\n                      ? height\n                      : height + 4\n                  )}\n                </div>\n                {/*<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">*/}\n                {/*  <defs>*/}\n                {/*    <pattern*/}\n                {/*      id=\"smallGrid\"*/}\n                {/*      width=\"6\"*/}\n                {/*      height=\"6\"*/}\n                {/*      patternUnits=\"userSpaceOnUse\"*/}\n                {/*    >*/}\n                {/*      <path*/}\n                {/*        d=\"M 8 0 L 0 0 0 8\"*/}\n                {/*        fill=\"none\"*/}\n                {/*        stroke=\"gray\"*/}\n                {/*        stroke-width=\"0.5\"*/}\n                {/*      />*/}\n                {/*    </pattern>*/}\n                {/*    <pattern*/}\n                {/*      id=\"grid\"*/}\n                {/*      width=\"60\"*/}\n                {/*      height=\"60\"*/}\n                {/*      patternUnits=\"userSpaceOnUse\"*/}\n                {/*    >*/}\n                {/*      <rect width=\"60\" height=\"60\" fill=\"url(#smallGrid)\" />*/}\n                {/*      <path*/}\n                {/*        d=\"M 60 0 L 0 0 0 60\"*/}\n                {/*        fill=\"none\"*/}\n                {/*        stroke=\"gray\"*/}\n                {/*        stroke-width=\"1\"*/}\n                {/*      />*/}\n                {/*    </pattern>*/}\n                {/*  </defs>*/}\n                {/*  <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />*/}\n                {/*</svg>*/}\n                {widgetsList.map((w) => {\n                  return (\n                    <Draggable key={w.id} bounds=\"parent\" {...dragHandlers}>\n                      <div\n                        onMouseOver={() => {\n                          setCurrentWidgetState({\n                            ...currentWidgetState,\n                            draggable: false,\n                            isActive: true,\n                            id: w.id,\n                          });\n                        }}\n                        className={`box resizable ${w.name}_${w.id}_resizable`}\n                        style={{\n                          position: \"absolute\",\n                          left: `${w?.left}px`,\n                          top: `${w?.top}px`,\n                        }}\n                      >\n                        <div\n                          onMouseOver={(e) => {\n                            e.stopPropagation();\n                            setCurrentWidgetState({\n                              ...currentWidgetState,\n                              draggable: true,\n                            });\n                          }}\n                          className=\"resizible-btn\"\n                        />\n\n                        <WgBox\n                          widget={w}\n                          setCurrentWidgetState={setCurrentWidgetState}\n                          currentWidgetState={currentWidgetState}\n                        />\n                      </div>\n                    </Draggable>\n                  );\n                })}\n              </div>\n            );\n          }}\n        </ReactResizeDetector>\n      </div>\n    </DnDBox>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}